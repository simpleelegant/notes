<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="robots" content="noindex, nofollow">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>notes</title>
        <link rel="icon" type="image/x-icon" href="./favicon.ico" />
        <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
        <link href="./normalize.css" rel="stylesheet" />
        <link href="./highlight.tomorrow.css" rel="stylesheet" />
        <link href="./index.css" rel="stylesheet" />
        <script type="text/javascript" src="./jquery-3.2.0.min.js"></script>
        <script type="text/javascript" src="./highlight.pack.js"></script>
        <script type="text/javascript">/* prevent hljs.initHighlightingOnLoad() */ hljs.configure({languages:[]});</script>
        <script type="text/javascript" src="./index.js"></script>
		<script type="text/javascript" charset="utf-8">
$(function() {
	// work in conjunction with history.pushSate()
	window.onpopstate = function() { A.loadArticleByURL(); };

	A.loadArticleByURL();
	
	    $('#edit').click(function() {
        $('#show-panel').hide();
        $('#edit-panel').show();
        $('input[name="title"]').val(A.article.title);
        $('textarea').val(A.article.content);
    });

    $('#edit-panel form').submit(function() {
        var title = $('input[name="title"]').val().trim(),
            content = $('textarea').val();

        if (!title) { alert('Please enter the title.'); return false; }

        A.updateArticle({
            id: A.article.id,
            title: title,
            content: content,
            before_content_md5: A.article.content_md5
        }, function(data) {
            A.loadArticle(A.article.id, true);

        $('#edit-panel').hide();
        $('#show-panel').show();
        });

        return false;
    });

    $('#edit-panel .cancel').click(function() {
       A.getMD5($('textarea').val(), function(md5) {
           if (md5 === A.article.content_md5 || confirm('Content was changed. Cancel?')) {
               $('#edit-panel').hide();
               $('#show-panel').show();
           }
       });
    });
});
		</script>
    </head>

    <body>
	    <div id="show-panel">
		<p><a id="super-article" onclick="A.clickArticleLink(this);"></a></p>
        <div id="title"></div>
        <div id="quick">
            <a href="#sub-articles">Sub-articles</a>
			路
            <a href="#sibling-articles">Sibling Articles</a>
			路
		<a id="edit">Edit</a>
			路
            <a href="./help.html">Help</a>
			路
            <a href="./search.html">Search</a>
        </div>
        <div class="part" id="topics"><div></div></div>
        <div class="part" id="content"><div></div></div>
        <div class="part" id="sub-articles"><div></div></div>
        <div class="part" id="sibling-articles"><div></div></div>
        <a id="back-to-top" href="#super-article">Top</a>
		    </div>
	            <div id="edit-panel">
            <form action="" method="post">
                <p><input type="text" name="title" placeholder="Article Title" /></p>
                <p><textarea name="content" rows="24" cols="40" placeholder="Article Content"></textarea></p>
                <p><input type="submit" value="Save" /> or <a class="cancel">Cancel</a></p>
            </form>
        </div>
    </body>
</html>
